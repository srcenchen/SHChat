import{i as pe,s as y,d as ye,p as U,c as O,t as be,b as _e,f as T,h as xe,I as N,w as z,o as ee,q as we,v as b,z as L,J as Se,K as Oe,n as X,A as Te,B as Ce,D as B,E as I,F as h,L as Pe,N as je,G as J,O as M,H as q}from"./index-5c697bd3.js";import{a as ze,u as Ee,F as Ve,i as Ne,B as Fe}from"./const-76bb99e3.js";/**
 * tdesign v1.3.8
 * (c) 2023 tdesign
 * @license MIT
 */function G(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),t.push.apply(t,a)}return t}function De(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G(Object(t),!0).forEach(function(a){y(n,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(t,a))})}return n}function Re(n,e){for(var t=De({},n),a=0;a<e.length;a++){var u=e[a];delete t[u]}return t}function Y(n,e){var t=pe(e);if(!n||n.length===0)return t?{length:0,characters:n}:0;for(var a=0,u=0;u<n.length;u++){var i=0;if(n.charCodeAt(u)>127||n.charCodeAt(u)===94?i=2:i=1,t&&a+i>e)return{length:a,characters:n.slice(0,u)};a+=i}return t?{length:a,characters:n}:a}/**
 * tdesign v1.3.8
 * (c) 2023 tdesign
 * @license MIT
 */var m,ke=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,Ae=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Be(n){if(!(typeof window>"u")){var e=window.getComputedStyle(n),t=e.getPropertyValue("box-sizing")||e.getPropertyValue("-moz-box-sizing")||e.getPropertyValue("-webkit-box-sizing"),a=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),u=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width")),i=Ae.map(function(l){return"".concat(l,":").concat(e.getPropertyValue(l))}).join(";");return{sizingStyle:i,paddingSize:a,borderSize:u,boxSizing:t}}}function Z(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;m||(m=document.createElement("textarea"),document.body.appendChild(m));var a=Be(n),u=a.paddingSize,i=a.borderSize,l=a.boxSizing,v=a.sizingStyle;m.setAttribute("style","".concat(v,";").concat(ke)),m.value=n.value||n.placeholder||"";var d=m.scrollHeight,f={};l==="border-box"?d+=i:l==="content-box"&&(d-=u),m.value="";var E=m.scrollHeight-u;if(e!==null){var w=E*e;l==="border-box"&&(w=w+u+i),d=Math.max(w,d),f.minHeight="".concat(w,"px")}if(t!==null){var C=E*t;l==="border-box"&&(C=C+u+i),d=Math.min(C,d)}return f.height="".concat(d,"px"),m.parentNode&&m.parentNode.removeChild(m),m=null,f}/**
 * tdesign v1.3.8
 * (c) 2023 tdesign
 * @license MIT
 */var Ie={autofocus:Boolean,autosize:{type:[Boolean,Object],default:!1},disabled:Boolean,maxcharacter:{type:Number},maxlength:{type:Number},name:{type:String,default:""},placeholder:{type:String,default:void 0},readonly:Boolean,status:{type:String,validator:function(e){return["default","success","warning","error"].includes(e)}},tips:{type:[String,Function]},value:{type:[String,Number]},modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function};/**
 * tdesign v1.3.8
 * (c) 2023 tdesign
 * @license MIT
 */function W(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),t.push.apply(t,a)}return t}function Me(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?W(Object(t),!0).forEach(function(a){y(n,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(t,a))})}return n}function Q(n){var e={};return Object.keys(n).forEach(function(t){Ne(n[t])||(e[t]=n[t])}),e}var Ke=ye({name:"TTextarea",inheritAttrs:!1,props:Me({},Ie),setup:function(e,t){var a=t.attrs,u=t.expose,i=U(),l=U("textarea"),v=O(function(){return"".concat(l.value,"__tips")}),d=O(function(){return"".concat(l.value,"__limit")}),f=be(e),E=f.value,w=f.modelValue,C=ze(E,w,e.defaultValue,e.onChange),K=_e(C,2),p=K[0],te=K[1],P=Ee(),j=T({}),g=T(),F=T(!1),D=T(!1),ae=function(){var r;return(r=g.value)===null||r===void 0?void 0:r.focus()},ne=function(){var r;return(r=g.value)===null||r===void 0?void 0:r.blur()},x=function(){var r,s;if(e.autosize===!0)j.value=Z(g.value);else if(e.autosize&&N(e.autosize)==="object"){var c=e.autosize,_=c.minRows,V=c.maxRows;j.value=Z(g.value,_,V)}else a.rows?j.value={height:"auto",minHeight:"auto"}:a.style&&(r=g.value)!==null&&r!==void 0&&(s=r.style)!==null&&s!==void 0&&s.height&&(j.value={height:g.value.style.height})},re=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=g.value,c=String(r);s&&s.value!==c&&(s.value=c,p.value=c)},$=function(r){var s=r.target,c=s.value;if(e.maxcharacter&&e.maxcharacter>=0){var _=Y(c,e.maxcharacter);c=N(_)==="object"&&_.characters}!D.value&&te(c,{e:r}),X(function(){return re(c)}),x()},oe=function(r){$(r)},le=function(){D.value=!0},ie=function(r){D.value=!1,$(r)},R=function(r,s){var c;if(!P.value){var _="on".concat(r[0].toUpperCase()).concat(r.slice(1));(c=e[_])===null||c===void 0||c.call(e,p.value,{e:s})}},ue=function(r){R("keydown",r)},se=function(r){R("keyup",r)},ce=function(r){R("keypress",r)},de=function(r){var s;x(),!P.value&&(F.value=!0,(s=e.onFocus)===null||s===void 0||s.call(e,p.value,{e:r}))},k=xe(Ve,void 0),ve=function(r){var s;x(),F.value=!1,(s=e.onBlur)===null||s===void 0||s.call(e,p.value,{e:r}),k==null||k.handleBlur()},fe=O(function(){var o;return[l.value,(o={},y(o,"".concat(i.value,"-is-disabled"),P.value),y(o,"".concat(i.value,"-is-readonly"),e.readonly),o)]}),me=O(function(){return Q({autofocus:e.autofocus,disabled:P.value,readonly:e.readonly,placeholder:e.placeholder,maxlength:e.maxlength||void 0,name:e.name||void 0})}),ge=O(function(){var o=Y(String(p.value||""));return N(o)==="object"?o.length:o});z(function(){return p.value},function(){return x()}),z(g,function(o){o&&x()}),z(function(){return e.autofocus},function(o){o&&g.value.focus()}),z(j,function(o){var r=a.style;Se(g.value,Oe(r,o))}),z(p,function(){X(function(){return x()})}),u({focus:ae,blur:ne}),ee(function(){x()});var he=Te();return function(){var o,r=Q({onFocus:de,onBlur:ve,onKeydown:ue,onKeyup:se,onKeypress:ce}),s=we(),c=s.STATUS,_=O(function(){var S;return["".concat(l.value,"__inner"),(S={},y(S,"".concat(i.value,"-is-").concat(e.status),e.status),y(S,c.value.disabled,P.value),y(S,c.value.focused,F.value),y(S,"".concat(i.value,"-resize-none"),N(e.autosize)==="object"),S),"narrow-scrollbar"]}),V=he("tips"),A=V&&b("div",{class:"".concat(v.value," ").concat(l.value,"__tips--").concat(e.status||"normal")},[V]),H=e.maxcharacter&&b("span",{class:d.value},["".concat(ge.value,"/").concat(e.maxcharacter)])||!e.maxcharacter&&e.maxlength&&b("span",{class:d.value},["".concat(p.value?(o=String(p.value))===null||o===void 0?void 0:o.length:0,"/").concat(e.maxlength)]);return b("div",L({class:fe.value},Re(a,["style"])),[b("textarea",L({onInput:oe,onCompositionstart:le,onCompositionend:ie,ref:g,value:p.value,class:_.value},r,me.value),null),A||H?b("div",{class:["".concat(l.value,"__info_wrapper"),y({},"".concat(l.value,"__info_wrapper_align"),!A)]},[A,H]):null])}}});/**
 * tdesign v1.3.8
 * (c) 2023 tdesign
 * @license MIT
 */var $e=Ce(Ke);const He={class:"flex flex-col items-center p-4 pb-8"},Ue={class:"h-full"},Le=h("tr",null,[h("th",{class:"pr-16 align-center"},"name"),h("th",{class:"pr-16 align-center"},"content"),h("th",{class:"pr-16 align-center"},"date")],-1),Xe={class:"align-center mt-2",style:{"word-wrap":"break-word","word-break":"break-all"}},Je={class:"align-center mt-2",style:{"word-wrap":"break-word","word-break":"break-all"}},qe={class:"align-center mt-2",style:{"word-wrap":"break-word","word-break":"break-all"}},Ge={class:"w-full flex flex-col justify-center items-center"},Ye={class:"flex mt-4"},Qe={__name:"Chat",setup(n){const e=T([]),t=T("");ee(()=>{const i=window.location.hostname,l=new WebSocket("ws://"+i+"/api/message/chat-list-w-s");l.onmessage=v=>{e.value=JSON.parse(v.data).data.chatList}});function a(){fetch("/api/message/clear-chat-list",{method:"DELETE"})}Date.prototype.Format=function(i){const l={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var v in l)new RegExp("("+v+")").test(i)&&(i=i.replace(RegExp.$1,RegExp.$1.length==1?l[v]:("00"+l[v]).substr((""+l[v]).length)));return i};function u(){new Date().Format("yyyy-MM-ddTHH:mm:ssZ").toLocaleString().replace("/","-").replace("/","-").replace(" ","T").replace(" ","-");const l=new URLSearchParams;l.append("NickName","Ehsan"),l.append("Message",t.value),t.value="",fetch("api/message/send-chat",{method:"PUT",body:l})}return(i,l)=>{const v=$e,d=Fe;return B(),I("div",He,[h("div",Ue,[h("table",null,[Le,(B(!0),I(Pe,null,je(e.value,f=>(B(),I("tr",null,[h("td",Xe,M(f.NickName),1),h("td",Je,M(f.Content),1),h("td",qe,M(f.Date),1)]))),256))])]),h("div",Ge,[b(v,{class:"lg:w-1/3 mt-8",autosize:{minRows:2,maxRows:4},modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=f=>t.value=f)},null,8,["modelValue"]),h("div",Ye,[b(d,{onClick:u},{default:J(()=>[q("Send")]),_:1}),b(d,{onClick:a,class:"ml-2",theme:"danger",variant:"outline"},{default:J(()=>[q("Clear")]),_:1})])])])}}};export{Qe as default};
